REPOSITORY                      TAG                 IMAGE ID            CREATED             SIZE
docker-images/ubuntu-tmp-file   latest              9cedf67e208f        11 minutes ago      64.2MB
ubuntu                          18.04               2eb2d388e1a2        7 days ago          64.2MB
hello-world                     latest              bf756fb1ae65        7 months ago        13.3kB


И контейнеры и имиджи - это взаимосвязанные сущности docker-платформы.
Имидж может существовать без контейнера, тогда как для запуска контейнера необходим
иимдж. Запущенный докер-контейнер - это финальный шаг в создании докер-системы.
До того как его запустить нужно создать образ.
Образ определяет специфику контейнера и управляет им.
Имидж - в нашей ДР использовался как темплейт, который мы скопировали и использовали для
запуска приложения. Изолированное окружение, в котором запускается приложение - это и есть контейнер.
Контейнер использует source code, библиотеки и зависимоти имиджа.
Создавая контейнер из имиджа мы добавляем слой контейнера к слоям имиджа.


Это новый имидж, который мы создали из родительского. У них разные ID.

Из листинга docker inspect image_id:
        "Id": "sha256:9cedf67e208f42f71ac63ec916f3be6aa0e7ac777fa7f3f1c31787d6107ad703",
        "RepoTags": [
            "docker-images/ubuntu-tmp-file:latest"
        ],
        "RepoDigests": [],
        "Parent": "sha256:2eb2d388e1a255c98029f40d6d7f8029fb13f1030abc8f11ccacbca686a8dc12",

Этот имидж мы создавали с запущенного контейнера:

        "Container": "ee55691ef2ba509642e8982588ad4c47bfc35ce5f19144bfa5643b3736620333",
        "ContainerConfig": {
            "Hostname": "ee55691ef2ba",
        "GraphDriver": {
            "Data": {
                "LowerDir": "/var/lib/docker/overlay2/3fe261c8c17d47f3890596b93e4b895cd8e1ecf7583406393256a8299d72aca9/diff:/var/lib/docker/overlay2/7543863d8cc6ff4d50c2ae8188b117b384b9acb12800ba79771141f39e523c35/diff:/var/lib/docker/overlay2/3e2630e45d89acb09a75c582089a543c3832a021b790c3e70d1572de22bd8d7b/diff:/var/lib/docker/overlay2/8d3a74c69cd39008b2ab2b1636d104aa911e7e18ee9532734f17a9e8c9152050/diff",
                "MergedDir": "/var/lib/docker/overlay2/77c2faa9f9b59afcb168b0a3b8e0543c5b33cbb04237c3ec795119627a70c86e/merged",
                "UpperDir": "/var/lib/docker/overlay2/77c2faa9f9b59afcb168b0a3b8e0543c5b33cbb04237c3ec795119627a70c86e/diff",
                "WorkDir": "/var/lib/docker/overlay2/77c2faa9f9b59afcb168b0a3b8e0543c5b33cbb04237c3ec795119627a70c86e/work"
            },

Файл /tmp/file мы создали в слое UpperDir:
/var/lib/docker/overlay2/77c2faa9f9b59afcb168b0a3b8e0543c5b33cbb04237c3ec795119627a70c86e/diff/tmp/file

Из листинга docker inspect conteiner_id:
Работающий контейнер был запущен с родительского имиджа.

        "Id": "ee55691ef2ba509642e8982588ad4c47bfc35ce5f19144bfa5643b3736620333
        "Image": "sha256:2eb2d388e1a255c98029f40d6d7f8029fb13f1030abc8f11ccacbca686a8dc12",
        "Config": {
            "Hostname": "ee55691ef2ba",

        "GraphDriver": {
            "Data": {
                "LowerDir": "/var/lib/docker/overlay2/9a3ac4b7e383dff4f10ed1352aea3056bbc49044addce5b47516ac52b93c5109-init/diff:/var/lib/docker/overlay2/3fe261c8c17d47f3890596b93e4b895cd8e1ecf7583406393256a8299d72aca9/diff:/var/lib/docker/overlay2/7543863d8cc6ff4d50c2ae8188b117b384b9acb12800ba79771141f39e523c35/diff:/var/lib/docker/overlay2/3e2630e45d89acb09a75c582089a543c3832a021b790c3e70d1572de22bd8d7b/diff:/var/lib/docker/overlay2/8d3a74c69cd39008b2ab2b1636d104aa911e7e18ee9532734f17a9e8c9152050/diff",
                "MergedDir": "/var/lib/docker/overlay2/9a3ac4b7e383dff4f10ed1352aea3056bbc49044addce5b47516ac52b93c5109/merged",
                "UpperDir": "/var/lib/docker/overlay2/9a3ac4b7e383dff4f10ed1352aea3056bbc49044addce5b47516ac52b93c5109/diff",
                "WorkDir": "/var/lib/docker/overlay2/9a3ac4b7e383dff4f10ed1352aea3056bbc49044addce5b47516ac52b93c5109/work"

Все слои у родительского имиджа другие, и файлик создался в UpperDir, но для родительского имиджа:

/var/lib/docker/overlay2/9a3ac4b7e383dff4f10ed1352aea3056bbc49044addce5b47516ac52b93c5109/diff/tmp/file
